YUI.add("moodle-atto_mathslate-button",function(e,t){var n="atto_mathslate",r={EDITOR:"mathslate-atto"};e.namespace("M.atto_mathslate").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_getTeX:null,initializer:function(){if(typeof MathJax=="undefined"&&!this.get("filteractive"))return;this._groupFocus={};var e=this.get("iconurl");this.addButton({iconurl:e,callback:this._displayDialogue}),M.tinymce_mathslate.help=this.get("helpurl")},_displayDialogue:function(){var t=e.guid(),i=this.get("configurl"),s=this.get("host");this._currentSelection=s.getSelection();var o=s.getSelection();if(this._currentSelection===!1)return;var u=this.getDialogue({headerContent:M.util.get_string("pluginname",n),width:500},!0);u.set("bodyContent",'<div class="filter_mathjaxloader_equation"><div id="'+t+'"></div><!--\\( \\)--></div>'),u.show(),e.fire(M.core.event.FILTER_CONTENT_UPDATED,{nodes:new e.NodeList(u.get("boundingBox"))});var a;window.setTimeout(function(){a=new M.tinymce_mathslate.Editor("#"+t,i),e.one("#"+t).addClass(r.EDITOR);var n=e.one("#"+t).appendChild(e.Node.create("<button>Cancel</button>")),f=e.one("#"+t).appendChild(e.Node.create("<button>Display TeX</button>")),l=e.one("#"+t).appendChild(e.Node.create("<button>Inline TeX</button>"));n.on("click",function(){u.hide()}),f.on("click",function(){u.hide(),s.setSelection(o),s.insertContentAtFocusPoint("\\["+a.output("tex")+"\\]"),this.markUpdated()},this),l.on("click",function(){u.hide(),s.setSelection(o),s.insertContentAtFocusPoint("\\("+a.output("tex")+"\\)"),this.markUpdated()},this);var c=e.one("#"+t).appendChild(e.Node.create("<span>Drag Me</span>")),h=(new e.DD.Drag({node:c})).plug(e.Plugin.DDProxy,{moveOnEnd:!1,resizeFrame:!1})},typeof MathJax=="undefined"?500:0)}},{ATTRS:{configurl:{value:null},helpurl:{value:null},iconurl:{value:null}}})},"@VERSION@",{requires:["escape","moodle-tinymce_mathslate-editor"]});
